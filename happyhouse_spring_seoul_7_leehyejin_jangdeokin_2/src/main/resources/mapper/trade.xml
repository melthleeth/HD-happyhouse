<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.ssafy.happyhouse.model.dao.HouseMapDao">

	<select id="getSido" resultType="SidoGugunCodeDto">
		SELECT		left(sido_code,2) as sidoCode, sido_code, sido_name as sidoName
		FROM		sidocode
		ORDER BY	sido_code
	</select>

	<select id="getGugunInSido" parameterType="String"
		resultType="SidoGugunCodeDto">
		SELECT		left(gugun_code,5) as gugunCode, gugun_code, gugun_name as gugunName
		FROM		guguncode
		WHERE		left(gugun_code,2) = #{sido}
		ORDER BY	gugun_code
	</select>
	
	<select id="getDongInGugun" parameterType="String"
		resultType="HouseDealDto">
		SELECT		distinct dong, code
		FROM		housedeal
		WHERE		code = left(#{gugun},2)
		ORDER BY	dong
	</select>

	<select id="getDongInfo" parameterType="String"
		resultType="HouseDealDto">
		SELECT		no, dong, AptName, code, jibun, dealAmount
		FROM		housedeal
		WHERE		dong like concat('%', #{detailedSearch}, '%')
	</select>
	
	<select id="getAptInfo" parameterType="String"
		resultType="HouseDealDto">
		SELECT		no, dong, AptName, code, jibun
		FROM		houseinfo
		where		AptName like concat('%', #{detailedSearch}, '%')
	</select>
	
	
	
	<select id="getAptInDong" parameterType="String"
		resultType="HouseDealDto">
		SELECT		no, dong, AptName, code, jibun, dealAmount
		FROM		housedeal
		WHERE		dong = #{dong}
		ORDER BY	AptName
	</select>
	
</mapper>